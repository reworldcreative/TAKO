import{g as y,i as f,b as S,c as M,J as q,d as F,p as k,e as w,h as L,o as $,a as E,s as A}from"./scale-CRV3HJO1.js";const P="/TAKO/";function x(){const o=document.querySelectorAll('input[name="convenient-communication-method"]'),a=document.querySelectorAll(".checkout-form__delivery-content");function t(c){a.forEach(u=>{u.classList.toggle("active",u.dataset.method===c)})}const r=document.querySelector('input[name="convenient-communication-method"]:checked');r&&t(r.value),o.forEach(c=>{c.addEventListener("change",()=>{t(c.value)})})}async function C(){const o=await y(`${P}data/cities.json`);if(f(),S(o),M(".dropdown",["Опція 1","Опція 2","Опція 3"]),x(),typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes("firefox")){const t=document.querySelector(".checkout-form__products");t.style.setProperty("scrollbar-width","thin"),t.style.setProperty("scrollbar-color","#0F5EBB transparent")}new q(".checkout-form").addField('[name="surname"]',[{rule:"required",errorMessage:"Прізвище обов’язкове"},{rule:"minLength",value:2,errorMessage:"Мінімум 2 символи"}]).addField('[name="name"]',[{rule:"required",errorMessage:"Ім’я обов’язкове"},{rule:"minLength",value:2,errorMessage:"Мінімум 2 символи"}]).addField('[name="middle-name"]',[{rule:"required",errorMessage:"По батькові обов’язкове"},{rule:"minLength",value:2,errorMessage:"Мінімум 2 символи"}]).addField('[name="phone"]',[{rule:"required",errorMessage:"Номер телефону обов’язковий"},{rule:"customFunction",validator:t=>{const r=t.replace(/[^\d]/g,"");return/^380\d{9}$/.test(r)},errorMessage:"Введіть номер у форматі +380XXXXXXXXX"}]).addField('[name="address"]',[{rule:"required",errorMessage:"Адреса обов’язкова"},{rule:"customFunction",validator:(t,r)=>(o.includes(t.trim())?r['[name="branch-number"]'].elem.disabled=!1:r['[name="branch-number"]'].elem.disabled=!0,o.includes(t.trim())),errorMessage:"Населений пункт не знайдено"}]).addField('[name="branch-number"]',[{rule:"customFunction",validator:(t,r)=>r['[name="branch-number"]'].elem.disabled?!0:t.trim()!=="",errorMessage:"Номер відділення обов’язковий"}]).addField('[name="delivery-phone"]',[{rule:"customFunction",validator:t=>{var c;return((c=document.querySelector('input[name="convenient-communication-method"]:checked'))==null?void 0:c.value)!=="phone"?!0:t.trim()!==""},errorMessage:"Номер телефону обов’язковий"},{rule:"customFunction",validator:t=>{const r=t.replace(/[^\d]/g,"");return/^380\d{9}$/.test(r)},errorMessage:"Введіть номер у форматі +380XXXXXXXXX"}]).addField('[name="delivery-viber"]',[{rule:"customFunction",validator:t=>{var c;return((c=document.querySelector('input[name="convenient-communication-method"]:checked'))==null?void 0:c.value)!=="viber"?!0:t.trim()!==""},errorMessage:"Номер viber обов’язковий"},{rule:"customFunction",validator:t=>{const r=t.replace(/[^\d]/g,"");return/^380\d{9}$/.test(r)},errorMessage:"Введіть номер у форматі +380XXXXXXXXX"}]).addField('[name="delivery-telegram"]',[{rule:"customFunction",validator:t=>{var c;return((c=document.querySelector('input[name="convenient-communication-method"]:checked'))==null?void 0:c.value)!=="telegram"?!0:t.trim()!==""},errorMessage:"Номер telegram обов’язковий"},{rule:"customFunction",validator:t=>{var l;if(((l=document.querySelector('input[name="convenient-communication-method"]:checked'))==null?void 0:l.value)!=="telegram")return!0;const c=t.trim();if(!c)return!1;const u=c.replace(/[^\d]/g,""),m=/^380\d{9}$/.test(u),d=/^@?[\w\d_]{3,32}$/.test(c);return m||d},errorMessage:"Введіть номер у форматі +380XXXXXXXXX або нік"}]).addField('[name="delivery-whatsup"]',[{rule:"customFunction",validator:t=>{var c;return((c=document.querySelector('input[name="convenient-communication-method"]:checked'))==null?void 0:c.value)!=="whatsup"?!0:t.trim()!==""},errorMessage:"Номер whatsup обов’язковий"},{rule:"customFunction",validator:t=>{const r=t.replace(/[^\d]/g,"");return/^380\d{9}$/.test(r)},errorMessage:"Введіть номер у форматі +380XXXXXXXXX"}]).addField('[name="delivery-signal"]',[{rule:"customFunction",validator:t=>{var c;return((c=document.querySelector('input[name="convenient-communication-method"]:checked'))==null?void 0:c.value)!=="signal"?!0:t.trim()!==""},errorMessage:"Номер signal обов’язковий"},{rule:"customFunction",validator:t=>{const r=t.replace(/[^\d]/g,"");return/^380\d{9}$/.test(r)},errorMessage:"Введіть номер у форматі +380XXXXXXXXX"}]).onSuccess(t=>{t.preventDefault();const r=e.target,c=new FormData(r),u=Object.fromEntries(c.entries()),m=document.querySelector(".checkout-form__price-value").textContent.trim().replace(",","."),d=document.querySelectorAll(".product-card"),l=Array.from(d).map(p=>{var g,h;const n=p.dataset.id,s=((g=p.querySelector(".product-card__title"))==null?void 0:g.textContent.trim())||"",i=((h=p.querySelector(".product-card__counter-input"))==null?void 0:h.value)||0;return{id:n,title:s,quantity:Number(i)}});u.products=l,u.totalPrice=m,window.scrollTo({top:0,behavior:"auto"}),document.querySelector(".checkout-success").classList.add("show"),F(),localStorage.setItem("checkoutProducts",""),console.log(u)})}function D(o){const a=document.createElement("div");return a.className="product-card",a.dataset.id=o.id,a.dataset.category=o.category,a.innerHTML=`
    <picture class="product-card__image ">
        <source type="image/webp" srcset="${o.image.replace(/\.\w+$/,".webp")}">
        <source srcset="${o.image}">
    
        <img src="${o.image}" alt="product" class="product-card__image" draggable="false" width="124" height="124" loading="lazy">
    </picture>
    <div class="product-card__top">
      <p class="product-card__title">${o.title}</p>
  
      <button class="product-card__trash-button" type="button" aria-label="delete product">
        <svg class="product-card__trash-icon">
          <use xlink:href="#trash-can"></use>
        </svg>
      </button>
    </div>
  
    <div class="product-card__bottom">
      <div class="counter product-card__counter">
        <button type="button" class="product-card__counter-button decrement" disabled="" aria-label="decrement counter">
          <svg class="product-card__counter-icon">
            <use xlink:href="#nimus"></use>
          </svg>
        </button>
        <input class="input product-card__counter-input" type="number" value="${o.quantity}" min="1" aria-label="product counter">
        <button type="button" class="product-card__counter-button increment" aria-label="increment counter">
          <svg class="product-card__counter-icon">
            <use xlink:href="#plus"></use>
          </svg>
        </button>
      </div>
  
      <div class="product-card__price">
        <p class="product-card__price-container">
          <span class="product-card__price-value">${o.price_per_unit}</span><span class="product-card__price-small">грн</span>
        </p>
        <p class="product-card__price-text">собівартість за од.</p>
      </div>
    </div>
  `,k(a),a}const N="/TAKO/";async function O(){const o=await y(`${N}data/categories/categories.json`),a=JSON.parse(localStorage.getItem("checkoutProducts")),t=o.filter(n=>a.some(s=>String(s.id)===String(n.id)&&String(s.category)===String(n.category))).map(n=>{const s=a.find(i=>String(i.id)===String(n.id)&&String(i.category)===String(n.category));return{...n,image:s.image,quantity:s.quantity}}),r=document.querySelector(".checkout-form__products"),c=document.querySelector(".checkout-form__preorder"),u=document.querySelector(".checkout-form__second-block_mobile"),m=document.querySelector(".checkout-form__price-value");t.forEach(n=>{r.appendChild(D(n))});const d=()=>{const n=r.querySelectorAll(".product-card");let s=0;if(n.forEach(i=>{const g=i.querySelector(".product-card__counter-input"),h=i.querySelector(".product-card__price-value"),_=parseInt(g.value,10),X=h.textContent.trim().replace(",",".").replace(/[^\d.]/g,""),b=parseFloat(X);!isNaN(_)&&!isNaN(b)&&(s+=_*b)}),m.textContent=s.toFixed(2).replace(".",","),n.length===0){c.classList.add("empty"),u.classList.add("empty");return}c.classList.remove("empty"),u.classList.remove("empty")},l=n=>{n.querySelector(".product-card__counter-input").addEventListener("input",d)},v=()=>{r.querySelectorAll(".product-card").forEach(s=>{l(s)})};new MutationObserver(()=>{v(),d()}).observe(r,{childList:!0}),v(),w(document.querySelector(".checkout-form__products"),()=>{d()}),d()}document.addEventListener("DOMContentLoaded",()=>{const o=[{selector:".header",callback:()=>{E([".header__products-button",".header__button-contacts",".header__button-support",".header__button-badge"],".header",.3,.1),A([".header__logo",".navigation__link"],".header",.5,.2)}}];L(),C(),O(),o.forEach(({selector:a,callback:t})=>{$(a,t)})});
